<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pagination with Search</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .item {
      padding: 15px;
      border-bottom: 1px solid #ddd;
      background-color: #f8f9fa;
      margin-bottom: 10px;
      border-radius: 5px;
    }
    .pagination .page-item.active .page-link {
      background-color: #0d6efd;
      border-color: #0d6efd;
      color: #fff;
    }
    .item-field {
      margin-bottom: 5px;
    }
    .item-field strong {
      display: inline-block;
      width: 80px;
    }
    .highlight {
      background-color: yellow;
      font-weight: bold;
      padding: 2px 4px;
      border-radius: 3px;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
    <a class="navbar-brand" href="#">My Page</a>
    <div class="ms-auto d-flex align-items-center">
      <input class="form-control me-2" type="search" placeholder="Search..." id="searchInput">
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container my-4">
    <div id="itemContainer"></div>
    <nav>
      <div class="d-flex justify-content-center align-items-center">
        <ul class="pagination mb-0 me-3" id="pagination"></ul>
        <select class="form-select w-auto" id="itemsPerPage">
          <option value="5">5</option>
          <option value="10" selected>10</option>
          <option value="15">15</option>
          <option value="20">20</option>
        </select>
      </div>
    </nav>
  </div>

  <script>
    // Dummy data with Name, Age, Gender
    const data = Array.from({ length: 100 }, (_, i) => {
      const names = ['John', 'Jane', 'Michael', 'Sarah', 'David', 'Emily', 'Robert', 'Lisa', 'Mark', 'Jennifer'];
      const genders = ['Male', 'Female'];
      
      return {
        name: names[i % names.length] + ' ' + (Math.floor(i / names.length) + 1),
        age: Math.floor(Math.random() * 50) + 18,
        gender: genders[i % 2]
      };
    });

    let filteredData = [...data];
    let currentPage = 1;
    let itemsPerPage = parseInt(document.getElementById('itemsPerPage').value);

    const itemContainer = document.getElementById('itemContainer');
    const pagination = document.getElementById('pagination');
    const searchInput = document.getElementById('searchInput');
    const itemsPerPageSelect = document.getElementById('itemsPerPage');

    function highlightText(text, searchTerm) {
      if (!searchTerm) return text;
      
      const regex = new RegExp(`(${searchTerm})`, 'gi');
      return text.replace(regex, '<span class="highlight">$1</span>');
    }

    function renderItems() {
      itemContainer.innerHTML = '';
      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const itemsToDisplay = filteredData.slice(start, end);

      if (itemsToDisplay.length === 0) {
        itemContainer.innerHTML = '<div class="alert alert-warning">No items found</div>';
        return;
      }

      itemsToDisplay.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        
        const searchTerm = searchInput.value.trim();
        const highlightedName = highlightText(item.name, searchTerm);
        
        div.innerHTML = `
          <div class="item-field"><strong>Name:</strong> ${highlightedName}</div>
          <div class="item-field"><strong>Age:</strong> ${item.age}</div>
          <div class="item-field"><strong>Gender:</strong> ${item.gender}</div>
        `;
        itemContainer.appendChild(div);
      });
    }

    function renderPagination() {
      pagination.innerHTML = '';
      const totalPages = Math.ceil(filteredData.length / itemsPerPage);

      for (let i = 1; i <= Math.min(10, totalPages); i++) {
        const li = document.createElement('li');
        li.className = 'page-item' + (i === currentPage ? ' active' : '');
        const a = document.createElement('a');
        a.className = 'page-link';
        a.textContent = i;
        a.href = '#';
        a.addEventListener('click', (e) => {
          e.preventDefault();
          currentPage = i;
          renderItems();
          renderPagination();
        });
        li.appendChild(a);
        pagination.appendChild(li);
      }
    }

    function update() {
      const searchTerm = searchInput.value.toLowerCase();
      filteredData = data.filter(item => 
        item.name.toLowerCase().includes(searchTerm) || 
        item.age.toString().includes(searchTerm) || 
        item.gender.toLowerCase().includes(searchTerm)
      );
      currentPage = 1;
      renderItems();
      renderPagination();
    }

    searchInput.addEventListener('input', update);

    itemsPerPageSelect.addEventListener('change', () => {
      itemsPerPage = parseInt(itemsPerPageSelect.value);
      update(); // this will re-render with new itemsPerPage
    });

    // Initial render
    update();
  </script>

</body>
</html>
